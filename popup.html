<!DOCTYPE html>
<!--
 * Author: Owen Schoppe <owen.schoppe@gmail.com>
 * Citable by Owen Schoppe is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License
 *
-->
<html data-ng-app="gDriveApp" ng-csp="">

<head>
<title>Citable</title>
<link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="/css/pop.css">
<link rel="stylesheet" type="text/css" href="/css/notes.css">
<link rel="stylesheet" type="text/css" href="/css/angular-csp.css">
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<!--<script type="text/javascript" src="https://apis.google.com/js/client.js"></script>-->
<script type="text/javascript" src="js/analytics.js"></script>

<script type="text/javascript" src="js/angular-1.2.16.min.js"></script>
<script type="text/javascript" src="js/util.js"></script>
<script type="text/javascript" src="js/gdocs.js"></script>

<script type="text/javascript" src="js/popup.js"></script>
</head>

<body>
<div id="frame">
	<div class="note" ng-controller='CitationController' ng-class="{fade:data.menu}" ng-keyup="myEvent($event)">
		<div id="citation">
			<form id="addbookmark" name="addbookmark" >
					<textarea id="summary" class="Droid input" name="summary" placeholder="Select some text or type a note" ng-model="data.citation.Summary" ng-disabled="data.menu"></textarea>
					<input type="text" id="title" class="Droid input" name="title" value="" placeholder="Enter a title" ng-model="data.citation.Title" ng-disabled="data.menu"/>
					<input type="text" id="author" class="Droid input" name="author" value="" placeholder="Enter an author" ng-model="data.citation.Author" ng-disabled="data.menu"/>
					<input type="text" id="url" class="Droid input" name="url" value="" placeholder="URL" ng-model="data.citation.Url" ng-disabled="data.menu"/>
					<input type="text" id="tags" class="Droid input" name="tags" value="" placeholder="Enter some tags" ng-model="data.citation.Tags" ng-disabled="data.menu"/>

		</div>
		<div id="shadow"></div>
	</div> <!--note-->
	<div id="controls" ng-controller="DocsController" ng-keyup="myEvent($event)">
		
	    <label id="selectionLabel" for="selection" class="indent note" ng-class="{fade:data.menu}">Save note in:</label>
		<div id="new_doc_container" ng-show="data.defaultDoc.id==''||data.defaultDoc.id==null" ng-class="{'error':ng-dirty&&ng-invalid}">
		  <div class="indent">
			  <input type="text" id="doc_title" placeholder="Enter a document title" ng-model="data.newDoc">
		  </div>
		</div>
		
		<div id="selection_box" class="clear">
			<div id="menu" name="menu" class="button Droid left controls" ng-click="toggleMenu()"><!--<img id="menu" src="/css/img/menu.png" />--></div>
			<div id="selection" name="selection" class="space">
				<div data-ng-show="data.loading">
					<span class="docName">{{data.defaultDoc.title}}</span>
					<img id="loading" class="docName" src="css/img/loading.gif"/>
				</div>
				
				<select id="destination" class="Droid" name="destination" ng-model="data.defaultDoc" ng-change="storeDefault()" data-ng-show="!data.loading" ng-options="doc.title for doc in data.docs track by doc.id">
					<option value="" ng-disabled="data.menu">Create New Document...</option>
					<!--<option data-ng-repeat="doc in docs" value="{{doc.alternateLink}}" ng-selected="selectedOption(doc.alternateLink);">{{doc.title}}</option>-->
					<!--ng-options="doc.title for doc in docs track by doc.alternateLink"-->
				</select>
			</div>
			<div id="addNote" class="button Droid note" ng-click="saveNote()" ng-disabled="data.menu || data.requesting" ng-class="{button_disabled:data.menu, fade:data.menu, button_disabled:data.requesting}">Save</div>
		</div>
		</form>
		<div id="action_box" class="clear indent">
			<span id="addNoteLabel" class="note" ng-class="{fade:data.menu}">alt+return</span>
			<div id="controlBar" class="controls">
				<a id="viewDoc" class="action" ng-click="viewDoc(data.defaultDoc.id,data.defaultDoc.alternateLink)">view document</a>
				<div class="menu" ng-show="data.menu">
				<div class="divider"></div>
				<div class="item"><a id="printDoc" class="action" ng-click="">print on post-its</a></div>
				<div class="divider"></div>
				<div class="item"><a id="exportDoc" class="action" ng-click="">export citations</a></div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="butterbox" ng-controller="butterController" box-butter></div>
</body>
</html>
